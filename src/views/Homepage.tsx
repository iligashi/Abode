// import React from "react";
// import Carousel from 'react-bootstrap/Carousel';
// import './css/home.css';
// import img1 from "../Images/1.jpg";
// import img2 from "../Images/2.jpg";
// import img3 from "../Images/3.jpg";
// import img4 from "../Images/4.jpg";
// import img5 from "../Images/5.jpg";
// import img6 from "../Images/6.jpg";
// import img7 from "../Images/7.jpg";
// import img8 from "../Images/8.jpg";
// import img9 from "../Images/9.webp";
// import img10 from "../Images/10.png";
// import img11 from "../Images/11.jpg";
// import img12 from "../Images/12.jpg";
// import img13 from "../Images/13.jpg";
// import img14 from "../Images/14.png";
// import img15 from "../Images/15.jpg";
// import img16 from "../Images/16.jpg";
// import img17 from "../Images/17.jpg";
// import img18 from "../Images/18.jpg";
// import img19 from "../Images/19.webp";
// import img20 from "../Images/20.jpg";
// import img21 from "../Images/21.webp";
// import img22 from "../Images/22.jpg";
// import img23 from "../Images/23.webp";
// import img24 from "../Images/24.jpg";
// import Header from "./Header";


// function Homepage(){
//   return(
//     <div>
//       <Header/>
      
//       <section className="main">
//       <div className="offers">
//         <div className="box">
//             <div className="first">
              
               
//                <Carousel interval={null}>
//       <Carousel.Item>
//       <img src={img1} alt="" />
//         <Carousel.Caption>
    
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img2} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img3} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//     </Carousel>
               
//                 <h3>First apartament</h3>
//                 <h4>99999.0$</h4>
//                 <button>Shiko apartamentin</button>
//             </div>
//             <div className="first">
//             <Carousel interval={null}>
//       <Carousel.Item>
//       <img src={img4} alt="" />
//         <Carousel.Caption>
    
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img5} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img8} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//     </Carousel>
//                 <h3>Second apartament</h3>
//                 <h4>54900.00 €</h4>
//                 <button><a href="buy.php">Shiko apartamentin</a></button>
//             </div>
//             <div className="first">
//             <Carousel interval={null}>
//       <Carousel.Item>
//       <img src={img6} alt="" />
//         <Carousel.Caption>
    
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img7} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img9} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//     </Carousel>       
//                    <h3>Third apartament</h3>
//                 <h4>29000.oo$</h4>
//                 <button><a href="buy.php">Shiko apartamentin</a></button>
//             </div>
//             <div className="first">
//             <Carousel interval={null}>
//       <Carousel.Item>
//       <img src={img10} alt="" />
//         <Carousel.Caption>
    
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img11} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img12} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//     </Carousel>
//                 <h3>Fourth</h3>
//                 <h4>99900.0$</h4>
//                 <button><a href="buy.php">Shiko apartamentin</a></button>
//             </div>
//             <div className="first">
                
//             <Carousel interval={null}>
//       <Carousel.Item>
//       <img src={img13} alt="" />
//         <Carousel.Caption>
    
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img14} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img15} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//     </Carousel> 
//                 <h3>Fifth apartament</h3>
//                 <h4>70000.0$</h4>
//                 <button><a href="buy.php">Shiko apartamentin</a></button>
//             </div>
//             <div className="first">
//             <Carousel interval={null}>
//       <Carousel.Item>
//       <img src={img16} alt="" />
//         <Carousel.Caption>
    
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img17} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img18} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//     </Carousel> 
//                     <h3>Sixth apartament</h3>
//                 <h4>700000.0$</h4>
//                 <button><a href="buy.php">Shiko apartamentin</a></button>
//             </div>
//             <div className="first">
//             <Carousel interval={null}>
//       <Carousel.Item>
//       <img src={img19} alt="" />
//         <Carousel.Caption>
    
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img20} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img21} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//     </Carousel>                
//                    <h3>Seventh apartament</h3>
//                 <h4>99900.0$</h4>
//                 <button><a href="buy.php">Shiko apartamentin</a></button>
//             </div>
//             <div className="first">
//             <Carousel interval={null}>
//       <Carousel.Item>
//       <img src={img22} alt="" />
//         <Carousel.Caption>
    
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img23} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//       <Carousel.Item>
//       <img src={img24} alt="" />
//         <Carousel.Caption>
          
//         </Carousel.Caption>
//       </Carousel.Item>
//     </Carousel> 
//                 <h3>Eighth apartament</h3>
//                 <h4>99900.0$</h4>
//                 <button><a href="buy.php">Shiko apartamentin</a></button>
//             </div>
//         </div>
//     </div>
//         </section>
//     <section className="footer bg-light">
//         <div className="container py-5">
//           <hr />
//           <div className="row">
//             <div className="col-md-3 mb-4 mb-md-0"></div>
//             <div className="col-md-3 mb-4 mb-md-0">
//               <div>
//                 <h3>Stay connected with ABODE</h3>
//                 <div className="icons">
              
//                 </div>
//                 <h2>Mundësuar nga Abode, Inc.</h2>
//                 <h5>Të gjitha të drejtat e rezervuara</h5>
//                 <p>Kushtet e përdorimit – </p>
//                 <p>Politika e Privatësisë</p>
//               </div>
//             </div>
//             <div className="col-md-3 mb-4 mb-md-0">
//               <div>
//                 <h3>Llogaria</h3>
//                 <p>Rezervimet</p>
//                 <p>Lista e deshirave</p>
//                 <p>Llogaria ime</p>
//               </div>
//             </div>
//             <div className="col-md-3">
//               <div>
//                 <h3>Kontakti</h3>
//                 <p>info@gmail.com</p>
//                 <p>Tel:+383 045 883 702</p>
//                 <p>Prishtinë, Kosovë</p>
//                 <p>.......</p>
//               </div>
//             </div>
//           </div>
//         </div>
//       </section>
//     </div>
//   );
// }

// export default Homepage;
import React, { useState, useEffect } from "react";
import axios from "axios";
import { Carousel } from "react-bootstrap";
import Header from "./Header";

interface Property {
  HousesID: number;
  PropertyID: number;
  Price: number;
  Photos: string[]; // Assuming Photos are base64 encoded strings
  // Add other properties as needed
}

function Homepage() {
  const [posts, setPosts] = useState<Property[]>([]);
  const [newProperty, setNewProperty] = useState({
    PropertyID: 0,
    Price: 0,
    Bedrooms: 0,
    Bathrooms: 0,
    Size: 0,
    YearBuilt: 0,
    GarageSpaces: 0,
    Floors: 0,
    Photos: [] as File[],
  });

  useEffect(() => {
    fetchData();
  }, []);

  const fetchData = () => {
    axios
      .get<Property[]>("https://localhost:7083/api/PropertyHouses")
      .then((response) => {
        console.log("Data fetched successfully:", response.data);
        setPosts(response.data);
      })
      .catch((error) => {
        console.error("Error fetching data:", error);
      });
  };

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (e.target.files) {
      setNewProperty({
        ...newProperty,
        Photos: Array.from(e.target.files),
      });
    }
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    const formData = new FormData();
    formData.append("PropertyID", newProperty.PropertyID.toString());
    formData.append("Price", newProperty.Price.toString());
    formData.append("Bedrooms", newProperty.Bedrooms.toString());
    formData.append("Bathrooms", newProperty.Bathrooms.toString());
    formData.append("Size", newProperty.Size.toString());
    formData.append("YearBuilt", newProperty.YearBuilt.toString());
    formData.append("GarageSpaces", newProperty.GarageSpaces.toString());
    formData.append("Floors", newProperty.Floors.toString());
    newProperty.Photos.forEach((photo) => formData.append("Photos", photo));
    
    axios.post("https://localhost:7083/api/PropertyHouses", formData)
      .then(() => {
        console.log("Property uploaded successfully");
        fetchData(); // Refresh data after upload
      })
      .catch((error) => {
        console.error("Error uploading property:", error);
      });
  };

  return (
    <div>
      <Header />
      <section className="main">
        <div className="offers">
          <div className="box">
            {/* Property Upload Form */}
            <form onSubmit={handleSubmit}>
              <input
                type="text"
                placeholder="Property ID"
                value={newProperty.PropertyID}
                onChange={(e) => setNewProperty({ ...newProperty, PropertyID: parseInt(e.target.value) })}
              />
              <input
                type="number"
                placeholder="Price"
                value={newProperty.Price}
                onChange={(e) => setNewProperty({ ...newProperty, Price: parseInt(e.target.value) })}
              />
              {/* Add input fields for other property attributes */}
              <input type="file" multiple onChange={handleFileChange} />
              <button type="submit">Upload Property</button>
            </form>

            {/* Display Existing Properties */}
            {posts.map((post) => (
              <div className="first" key={post.HousesID}>
                <Carousel interval={null}>
                  {post.Photos && post.Photos.map((photo, index) => (
                    <Carousel.Item key={index}>
                      <img src={`data:image/jpeg;base64,${photo}`} alt="" />
                      <Carousel.Caption>
                        {/* You can add caption if needed */}
                      </Carousel.Caption>
                    </Carousel.Item>
                  ))}
                </Carousel>
                <h3>{post.PropertyID} Apartment</h3>
                <h4>{post.Price}</h4>
                <button>View Apartment</button>
              </div>
            ))}
          </div>
        </div>
      </section>
      {/* Footer Section */}
    </div>
  );
}

export default Homepage;
